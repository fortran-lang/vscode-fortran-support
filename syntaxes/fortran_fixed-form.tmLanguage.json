{
  "comment": "Inherits rules from free form Fortran.",
  "name": "Fortran - Fixed Form",
  "scopeName": "source.fortran.fixed",
  "fileTypes": ["f", "F", "f77", "F77", "for", "FOR"],
  "injections": {
    "source.fortran.fixed - ( string | comment )": {
      "patterns": [
        {
          "include": "#line-header"
        },
        {
          "include": "#line-end-comment"
        }
      ]
    }
  },
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "comment": "Labelled FORMAT statement (spanning continuation lines)",
      "name": "meta.statement.IO.fortran",
      "begin": "(?ix)^(?=.{5}|(?<!^)\\t)\\s*(?:([0-9]{1,5})\\s+)?(format)\\b",
      "beginCaptures": {
        "1": { "name": "constant.numeric.fortran" },
        "2": { "name": "keyword.control.format.fortran" }
      },
      "end": "(?=^(?![^!#\\n]{5}\\S))",
      "patterns": [
        { "include": "#comments" },
        { "include": "#line-header" },
        { "match": "!.*$", "name": "comment.line.fortran" },
        { "include": "source.fortran.free#string-constant" },
        { "include": "source.fortran.free#numeric-constant" },
        { "include": "source.fortran.free#operators" },
        { "include": "source.fortran.free#format-parentheses" }
      ]
    },
    {
      "include": "#line-header"
    },
    {
      "include": "source.fortran.free"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.fortran",
          "begin": "^[cC\\*]",
          "end": "\\n"
        },
        {
          "name": "comment.line.fortran",
          "begin": "^ *!",
          "end": "\\n"
        }
      ]
    },
    "line-end-comment": {
      "name": "comment.line-end.fortran",
      "begin": "(?<=^.{72})(?!\\n)",
      "end": "(?=\\n)"
    },
    "line-header": {
      "match": "^(?!\\s*[!#])(?:([ \\d]{5} )|( {5}.)|(\\t)|(.{1,5}))",
      "captures": {
        "1": {
          "name": "constant.numeric.fortran"
        },
        "2": {
          "name": "keyword.line-continuation-operator.fortran"
        },
        "3": {
          "name": "source.fortran.free"
        },
        "4": {
          "name": "invalid.error.fortran"
        }
      }
    }
  }
}
